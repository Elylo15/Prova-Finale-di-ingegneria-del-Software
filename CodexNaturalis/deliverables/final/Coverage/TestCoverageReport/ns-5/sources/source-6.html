


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1252"> 
  <title>Coverage Report > Utilities</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">it.polimi.ingsw.client.view.gui</a>
</div>

<h1>Coverage Summary for Class: Utilities (it.polimi.ingsw.client.view.gui)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">Utilities</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/21)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/17)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/114)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package it.polimi.ingsw.client.view.gui;
&nbsp;
&nbsp;import it.polimi.ingsw.model.cards.Card;
&nbsp;import javafx.animation.*;
&nbsp;import javafx.application.Platform;
&nbsp;import javafx.event.EventHandler;
&nbsp;import javafx.scene.Node;
&nbsp;import javafx.scene.image.Image;
&nbsp;import javafx.scene.image.ImageView;
&nbsp;import javafx.scene.input.MouseEvent;
&nbsp;import javafx.scene.layout.Pane;
&nbsp;import javafx.scene.media.Media;
&nbsp;import javafx.scene.media.MediaPlayer;
&nbsp;import javafx.util.Duration;
&nbsp;
&nbsp;import java.util.Objects;
&nbsp;import java.util.Random;
&nbsp;
&nbsp;/**
&nbsp; * This class is the controller for the main page of the game.
&nbsp; * It handles the user&#39;s interaction with the GUI on the main page.
&nbsp; */
<b class="nc">&nbsp;public class Utilities {</b>
&nbsp;
&nbsp;    /**
&nbsp;     * Turns the card around when clicked
&nbsp;     *
&nbsp;     * @param event the mouse event
&nbsp;     */
&nbsp;    public static void turnAround(MouseEvent event) {
<b class="nc">&nbsp;        ImageView clickedCard = (ImageView) event.getSource();</b>
<b class="nc">&nbsp;        Card card = (Card) clickedCard.getUserData();</b>
&nbsp;
<b class="nc">&nbsp;        if (card != null) {</b>
<b class="nc">&nbsp;            clickedCard.setDisable(true);</b>
&nbsp;
<b class="nc">&nbsp;            FadeTransition fadeOut = new FadeTransition(Duration.seconds(0.5), clickedCard);</b>
<b class="nc">&nbsp;            fadeOut.setFromValue(1.0);</b>
<b class="nc">&nbsp;            fadeOut.setToValue(0.0);</b>
&nbsp;
<b class="nc">&nbsp;            fadeOut.setOnFinished(e -&gt; {</b>
<b class="nc">&nbsp;                ImageBinder imageBinder = new ImageBinder();</b>
<b class="nc">&nbsp;                Image newImage = imageBinder.getOppositeImage(card.getID(), card.isFront());</b>
<b class="nc">&nbsp;                clickedCard.setImage(newImage);</b>
&nbsp;
<b class="nc">&nbsp;                card.setFront(!card.isFront());</b>
&nbsp;
<b class="nc">&nbsp;                FadeTransition fadeIn = new FadeTransition(Duration.seconds(0.5), clickedCard);</b>
<b class="nc">&nbsp;                fadeIn.setFromValue(0.0);</b>
<b class="nc">&nbsp;                fadeIn.setToValue(1.0);</b>
&nbsp;
<b class="nc">&nbsp;                fadeIn.setOnFinished(e2 -&gt; clickedCard.setDisable(false));</b>
&nbsp;
<b class="nc">&nbsp;                fadeIn.play();</b>
&nbsp;            });
&nbsp;
<b class="nc">&nbsp;            fadeOut.play();</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Rotates the image
&nbsp;     *
&nbsp;     * @param imageView the image to rotate
&nbsp;     * @param seconds   the duration of the rotation
&nbsp;     */
&nbsp;    public static void rotateEffect(ImageView imageView, int seconds) {
<b class="nc">&nbsp;        RotateTransition rotateTransition = new RotateTransition(Duration.seconds(seconds), imageView);</b>
<b class="nc">&nbsp;        rotateTransition.setByAngle(360); // Rotate 360 degrees</b>
<b class="nc">&nbsp;        rotateTransition.setCycleCount(RotateTransition.INDEFINITE); // Repeat indefinitely</b>
<b class="nc">&nbsp;        rotateTransition.setAutoReverse(true); // Do not reverse the direction</b>
&nbsp;
&nbsp;        // Start the rotation
<b class="nc">&nbsp;        rotateTransition.play();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Rotates the arrow Image
&nbsp;     *
&nbsp;     * @param imageView the image to rotate
&nbsp;     * @param seconds   the duration of the rotation
&nbsp;     */
&nbsp;    public static void rotateEffectArrow(ImageView imageView, int seconds) {
<b class="nc">&nbsp;        RotateTransition rotateTransition = new RotateTransition(Duration.seconds(seconds), imageView);</b>
<b class="nc">&nbsp;        rotateTransition.setByAngle(-720); // Rotate 500 degrees</b>
<b class="nc">&nbsp;        rotateTransition.setCycleCount(RotateTransition.INDEFINITE); // Repeat indefinitely</b>
<b class="nc">&nbsp;        rotateTransition.setAutoReverse(false); // Do not reverse the direction</b>
&nbsp;
&nbsp;        // Start the rotation
<b class="nc">&nbsp;        rotateTransition.play();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Bind the image to the card and set the card to the imageView
&nbsp;     *
&nbsp;     * @param imageView the imageView to set the card to
&nbsp;     * @param cardID    the ID of the card
&nbsp;     * @param front     if the card is front up
&nbsp;     * @param card      the card to set to the imageView
&nbsp;     */
&nbsp;    public static void setupCard(ImageView imageView, int cardID, boolean front, Card card) {
<b class="nc">&nbsp;        ImageBinder imageBinder = new ImageBinder();</b>
<b class="nc">&nbsp;        ImageView cardImageView = imageBinder.bindImage(cardID, front);</b>
<b class="nc">&nbsp;        imageView.setImage(cardImageView.getImage());</b>
<b class="nc">&nbsp;        imageView.setUserData(card); // Store card ID and state</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Creates an imageView with the card and sets the card to the imageView
&nbsp;     *
&nbsp;     * @param cardID    the ID of the card
&nbsp;     * @param front     if the card is front up
&nbsp;     * @param card      the card to set to the imageView
&nbsp;     * @param layoutX   the x position of the imageView
&nbsp;     * @param layoutY   the y position of the imageView
&nbsp;     * @param fitHeight the height of the imageView
&nbsp;     * @param fitWidth  the width of the imageView
&nbsp;     * @return the imageView with the card set
&nbsp;     */
&nbsp;    public static ImageView createCardImageView(int cardID, boolean front, Card card, double layoutX, double layoutY, double fitHeight, double fitWidth) {
<b class="nc">&nbsp;        ImageView imageView = new ImageView();</b>
<b class="nc">&nbsp;        imageView.setFitWidth(fitWidth);</b>
<b class="nc">&nbsp;        imageView.setFitHeight(fitHeight);</b>
<b class="nc">&nbsp;        imageView.setLayoutX(layoutX);</b>
<b class="nc">&nbsp;        imageView.setLayoutY(layoutY);</b>
<b class="nc">&nbsp;        imageView.setPreserveRatio(true);</b>
&nbsp;
&nbsp;
<b class="nc">&nbsp;        setupCard(imageView, cardID, front, card);</b>
<b class="nc">&nbsp;        return imageView;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * When the mouse enters the imageView, it makes it bigger
&nbsp;     * When the mouse exits the imageView, it makes it smaller
&nbsp;     *
&nbsp;     * @param node  the node to apply the effect to
&nbsp;     * @param scale the scale factor
&nbsp;     */
&nbsp;    public static void hooverEffect(Node node, double scale) {
<b class="nc">&nbsp;        node.setOnMouseEntered(e -&gt; makeBiggerTransition(node, scale));</b>
<b class="nc">&nbsp;        node.setOnMouseExited(e -&gt; makeSmallerTransition(node));</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Removes the hoover effect from the node
&nbsp;     *
&nbsp;     * @param node the node to remove the effect from
&nbsp;     */
&nbsp;    public static void removeHooverEffect(Node node) {
<b class="nc">&nbsp;        node.setOnMouseEntered(null);</b>
<b class="nc">&nbsp;        node.setOnMouseExited(null);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * When the mouse enters the imageView, it makes it bigger
&nbsp;     *
&nbsp;     * @param node  the node to apply the effect to
&nbsp;     * @param scale the scale factor
&nbsp;     */
&nbsp;    public static void makeBiggerTransition(Node node, double scale) {
<b class="nc">&nbsp;        ScaleTransition makeBigger = new ScaleTransition(Duration.millis(200), node);</b>
<b class="nc">&nbsp;        makeBigger.setToX(scale);</b>
<b class="nc">&nbsp;        makeBigger.setToY(scale);</b>
<b class="nc">&nbsp;        makeBigger.play();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * When the mouse exits the imageView, it makes it smaller
&nbsp;     *
&nbsp;     * @param node the node to apply the effect to
&nbsp;     */
&nbsp;    public static void makeSmallerTransition(Node node) {
<b class="nc">&nbsp;        ScaleTransition makeSmaller = new ScaleTransition(Duration.millis(200), node);</b>
<b class="nc">&nbsp;        makeSmaller.setToX(1.0);</b>
<b class="nc">&nbsp;        makeSmaller.setToY(1.0);</b>
<b class="nc">&nbsp;        makeSmaller.play();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Displays the popup with the image
&nbsp;     *
&nbsp;     * @param imagePath the path of the image
&nbsp;     * @param mainPane  the main pane
&nbsp;     */
&nbsp;    public static void showImagePopup(String imagePath, Pane mainPane) {
<b class="nc">&nbsp;        Platform.runLater(() -&gt; {</b>
<b class="nc">&nbsp;            Image imageLoad = new Image(Objects.requireNonNull(Utilities.class.getResourceAsStream(imagePath)));</b>
<b class="nc">&nbsp;            ImageView image = new ImageView(imageLoad);</b>
&nbsp;
<b class="nc">&nbsp;            image.preserveRatioProperty().setValue(true);</b>
<b class="nc">&nbsp;            image.setFitWidth(646);</b>
<b class="nc">&nbsp;            image.setFitHeight(167);</b>
<b class="nc">&nbsp;            image.setLayoutX(957);</b>
<b class="nc">&nbsp;            image.setLayoutY(608);</b>
<b class="nc">&nbsp;            image.setOpacity(0.0); // Initially invisible</b>
&nbsp;
<b class="nc">&nbsp;            mainPane.getChildren().add(image);</b>
&nbsp;
<b class="nc">&nbsp;            fadeTransitionForPopUP(image, mainPane);</b>
&nbsp;        });
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Gets the card from the position
&nbsp;     *
&nbsp;     * @param layoutX  the x position of the card
&nbsp;     * @param layoutY  the y position of the card
&nbsp;     * @param mainPane the main pane
&nbsp;     * @return the imageView of the card
&nbsp;     */
&nbsp;    public static ImageView getCardFromPosition(double layoutX, double layoutY, Pane mainPane) {
<b class="nc">&nbsp;        ImageView imageView = null;</b>
<b class="nc">&nbsp;        for (Node node : mainPane.getChildren()) {</b>
<b class="nc">&nbsp;            if (node instanceof ImageView currentImageView) {</b>
<b class="nc">&nbsp;                if (currentImageView.getLayoutX() == layoutX &amp;&amp; currentImageView.getLayoutY() == layoutY) {</b>
<b class="nc">&nbsp;                    imageView = currentImageView;</b>
&nbsp;                    break;
&nbsp;                }
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return imageView; // Return null if not found</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Fades in the image
&nbsp;     *
&nbsp;     * @param node       the node to fade in (image, or label)
&nbsp;     * @param maxOpacity the maximum opacity
&nbsp;     */
&nbsp;    public static void fadeInTransition(Node node, double maxOpacity) {
<b class="nc">&nbsp;        FadeTransition fadeTransitionIn = new FadeTransition(Duration.seconds(1), node);</b>
<b class="nc">&nbsp;        fadeTransitionIn.setFromValue(0.0);</b>
<b class="nc">&nbsp;        fadeTransitionIn.setToValue(maxOpacity);</b>
<b class="nc">&nbsp;        node.setDisable(false);</b>
&nbsp;
<b class="nc">&nbsp;        fadeTransitionIn.play();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Fades out the image and removes it
&nbsp;     *
&nbsp;     * @param pane            the pane where the image is
&nbsp;     * @param node            the node to fade out (image, or label)
&nbsp;     * @param maxOpacity      the maximum opacity
&nbsp;     * @param removeAfterFade if true, remove the node after the fade out
&nbsp;     */
&nbsp;    public static void fadeOutTransition(Pane pane, Node node, double maxOpacity, boolean removeAfterFade) {
<b class="nc">&nbsp;        FadeTransition fadeTransitionOut = new FadeTransition(Duration.seconds(1), node);</b>
<b class="nc">&nbsp;        fadeTransitionOut.setFromValue(maxOpacity);</b>
<b class="nc">&nbsp;        fadeTransitionOut.setToValue(0.0);</b>
<b class="nc">&nbsp;        node.setDisable(true);</b>
<b class="nc">&nbsp;        if (removeAfterFade)</b>
<b class="nc">&nbsp;            fadeTransitionOut.setOnFinished(event -&gt; pane.getChildren().remove(node));</b>
&nbsp;
<b class="nc">&nbsp;        fadeTransitionOut.play();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Fades in the image and then fades it out
&nbsp;     *
&nbsp;     * @param image    the image to fade in and out
&nbsp;     * @param mainPane the main pane
&nbsp;     */
&nbsp;    public static void fadeTransitionForPopUP(ImageView image, Pane mainPane) {
<b class="nc">&nbsp;        FadeTransition fadeTransitionIn = new FadeTransition(Duration.seconds(1), image);</b>
<b class="nc">&nbsp;        fadeTransitionIn.setFromValue(0.0);</b>
<b class="nc">&nbsp;        fadeTransitionIn.setToValue(1.0);</b>
&nbsp;
<b class="nc">&nbsp;        PauseTransition pauseTransition = new PauseTransition(Duration.seconds(2));</b>
&nbsp;
<b class="nc">&nbsp;        FadeTransition fadeTransitionOut = new FadeTransition(Duration.seconds(1), image);</b>
<b class="nc">&nbsp;        fadeTransitionOut.setFromValue(1.0);</b>
<b class="nc">&nbsp;        fadeTransitionOut.setToValue(0.0);</b>
&nbsp;
<b class="nc">&nbsp;        fadeTransitionOut.setOnFinished(event -&gt; mainPane.getChildren().remove(image));</b>
&nbsp;
<b class="nc">&nbsp;        SequentialTransition sequentialTransition = new SequentialTransition(</b>
&nbsp;                fadeTransitionIn,
&nbsp;                pauseTransition,
&nbsp;                fadeTransitionOut
&nbsp;        );
&nbsp;
<b class="nc">&nbsp;        sequentialTransition.play();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Creates a clickable pane
&nbsp;     *
&nbsp;     * @param pane         the pane to add the clickable pane to
&nbsp;     * @param layoutX      the x position of the clickable pane
&nbsp;     * @param layoutY      the y position of the clickable pane
&nbsp;     * @param fitHeight    the height of the clickable pane
&nbsp;     * @param fitWidth     the width of the clickable pane
&nbsp;     * @param eventHandler the event handler to add to the clickable pane
&nbsp;     * @param image        the image of the clickable pane
&nbsp;     */
&nbsp;    public static void createClickablePane(Pane pane, double layoutX, double layoutY, double fitHeight, double fitWidth, EventHandler&lt;MouseEvent&gt; eventHandler, Image image) {
<b class="nc">&nbsp;        ImageView imageView = new ImageView(image);</b>
<b class="nc">&nbsp;        imageView.setLayoutX(layoutX);</b>
<b class="nc">&nbsp;        imageView.setLayoutY(layoutY);</b>
<b class="nc">&nbsp;        imageView.setFitHeight(fitHeight);</b>
<b class="nc">&nbsp;        imageView.setFitWidth(fitWidth);</b>
<b class="nc">&nbsp;        imageView.setOnMouseClicked(eventHandler);</b>
<b class="nc">&nbsp;        pane.getChildren().add(imageView);</b>
<b class="nc">&nbsp;        fadeInTransition(imageView, 0.5);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Creates a random color image for the placeholder
&nbsp;     *
&nbsp;     * @return the image with the random color
&nbsp;     */
&nbsp;    public static Image randomColorForPlaceholder() {
<b class="nc">&nbsp;        Random random = new Random();</b>
<b class="nc">&nbsp;        int color = random.nextInt(5);</b>
&nbsp;
<b class="nc">&nbsp;        return switch (color) {</b>
&nbsp;            case 0 -&gt;
<b class="nc">&nbsp;                    new Image(Objects.requireNonNull(Utilities.class.getResourceAsStream(&quot;/Images/Placeholders/blue.png&quot;)));</b>
&nbsp;            case 1 -&gt;
<b class="nc">&nbsp;                    new Image(Objects.requireNonNull(Utilities.class.getResourceAsStream(&quot;/Images/Placeholders/green.png&quot;)));</b>
&nbsp;            case 2 -&gt;
<b class="nc">&nbsp;                    new Image(Objects.requireNonNull(Utilities.class.getResourceAsStream(&quot;/Images/Placeholders/red.png&quot;)));</b>
&nbsp;            case 3 -&gt;
<b class="nc">&nbsp;                    new Image(Objects.requireNonNull(Utilities.class.getResourceAsStream(&quot;/Images/Placeholders/yellow.png&quot;)));</b>
&nbsp;            case 4 -&gt;
<b class="nc">&nbsp;                    new Image(Objects.requireNonNull(Utilities.class.getResourceAsStream(&quot;/Images/Placeholders/purple.png&quot;)));</b>
<b class="nc">&nbsp;            default -&gt; null;</b>
&nbsp;        };
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Plays the sound effect
&nbsp;     *
&nbsp;     * @param soundFile the sound file to play
&nbsp;     */
&nbsp;    public static void playSoundEffect(String soundFile) {
<b class="nc">&nbsp;        Platform.runLater(() -&gt; {</b>
<b class="nc">&nbsp;            String audioFile = Objects.requireNonNull(Utilities.class.getResource(soundFile)).toString();</b>
<b class="nc">&nbsp;            Media media = new Media(audioFile);</b>
<b class="nc">&nbsp;            MediaPlayer mediaPlayer = new MediaPlayer(media);</b>
<b class="nc">&nbsp;            mediaPlayer.play();</b>
&nbsp;        });
&nbsp;    }
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-06-26 22:00</div>
</div>
</body>
</html>
